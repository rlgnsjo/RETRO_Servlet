<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.retro.mybatis.SHSMapper.xml">
     <select id="bestList" resultType="com.retro.dto.ProductDTO">
     <![CDATA[
     	SELECT *
		FROM (SELECT * FROM tbl_product 
     	      ORDER BY p_good DESC)
 	    WHERE rownum <= 4
 	  ]]>   
     </select>
     
      <select id="newList" resultType="com.retro.dto.ProductDTO">
     <![CDATA[
     	SELECT *
		FROM (SELECT * FROM tbl_product 
        ORDER BY p_indate DESC)
 	    WHERE rownum <= 4
 	  ]]>   
     </select>
     <!--21. 매개변수로 전달받은 id값을 sql문에 바인딩변수로 넣고 sql문 실행 (DB로 이동) -->
      <select id="idCheck" parameterType="String" resultType="String">    
     	SELECT id FROM tbl_member
     	WHERE id = #{id}			  
     </select>
     <insert id="mem_insert" parameterType="com.retro.dto.MemberDTO" >
     INSERT INTO tbl_member(id, pw, name, phone, email, zipcode, addr1, addr2)
	 VALUES(#{id}, #{pw}, #{name}, #{phone}, #{email}, #{zipcode}, #{addr1}, #{addr2}) 
     </insert>
     <select id="loginCheck" parameterType="com.retro.dto.MemberDTO" resultType="com.retro.dto.MemberDTO">
     SELECT * FROM tbl_member
	 WHERE id= #{id} AND pw =#{pw}     
     </select>
     <update id="memUpdate" parameterType="com.retro.dto.MemberDTO">
     	UPDATE tbl_member SET
     	name = #{name},
     	phone = #{phone},
     	email = #{email},
     	zipcode = #{zipcode},
     	addr1 = #{addr1},
     	addr2 = #{addr2}
     WHERE id = #{id}	
     
     </update>
     <select id="memOne" parameterType="String" resultType="com.retro.dto.MemberDTO">
     	 SELECT * FROM tbl_member
		 WHERE id= #{id} 
     
     </select>
     <select id="pwCheck" resultType="int">
     	 SELECT COUNT(*) FROM tbl_member
		 WHERE id= #{id} AND pw =#{pw} 
     </select>
     <update id="pwUpdate" parameterType="hashmap">
    	 UPDATE tbl_member SET
    	 pw =#{pw}
    	 WHERE id= #{id} 
   	 
     </update>
     <delete id="memDelete" parameterType="String" >
     	 DELETE FROM tbl_member
     	 WHERE id= #{id}    	    
     </delete>

</mapper>